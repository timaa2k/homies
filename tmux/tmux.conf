########################  GLOBAL OPTIONS  ########################

# Colors in nvim
set -g default-terminal "screen-256color"

# Enable mouse interaction
set -g mouse on

# Set vi-mode scrolling
set-window-option -g mode-keys vi

# Do not rename windows automatically
#set-option -g allow-rename off

# Turn off all visual notifications
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none


#########################  KEY MAPPINGS  #########################

unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Smart pane switching with awareness of Vim splits.
# See: https://github.com/christoomey/vim-tmux-navigator
# Note: Because of wrapProgram in `vim` the executable name is ".vim-wrapped"
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep 'S.*.nvim-wrapped_'"
bind-key -n 'C-h' if-shell "$is_vim" "send-keys 'C-h'"  "select-pane -L"
bind-key -n 'C-j' if-shell "$is_vim" "send-keys 'C-j'"  "select-pane -D"
bind-key -n 'C-k' if-shell "$is_vim" "send-keys 'C-k'"  "select-pane -U"
bind-key -n 'C-l' if-shell "$is_vim" "send-keys 'C-l'"  "select-pane -R"
bind-key -n 'C-\' if-shell "$is_vim" "send-keys 'C-\\'" "select-pane -l"
bind-key -T copy-mode-vi 'C-h' select-pane -L
bind-key -T copy-mode-vi 'C-j' select-pane -D
bind-key -T copy-mode-vi 'C-k' select-pane -U
bind-key -T copy-mode-vi 'C-l' select-pane -R
bind-key -T copy-mode-vi 'C-\' select-pane -l

# Use v to trigger selection
bind-key -T copy-mode-vi v send-keys -X begin-selection

# Use y to yank current selection to system clipboard
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

# split panes using | and -
bind | split-window -h
bind - split-window -v


#########################  COLORSCHEME  ##########################

#  Modes
setw -g mode-style 'fg=colour1 bg=colour18 bold'
setw -g clock-mode-colour colour5

# Pane borders
set -g pane-border-style fg='#6272a4'
set -g pane-active-border-style fg='#ff79c6'

# Message text
set -g message-style bg='#44475a',fg='#8be9fd'

set -g status-style bg='#44475a',fg='#bd93f9'
set -g status-interval 1

set -g status-left '#[bg=#f8f8f2]#[fg=#282a36]#{?client_prefix,#[bg=#ff79c6],} ☺ '
set -ga status-left '#[bg=#44475a]#[fg=#ff79c6] #{?window_zoomed_flag, ↕  ,   }'

set-window-option -g window-status-style fg='#bd93f9',bg=default
set-window-option -g window-status-current-style fg='#ff79c6',bg='#282a36'

set -g status-right '#[fg=#8be9fd,bg=#44475a]#[fg=#44475a,bg=#8be9fd] #(tmux-mem-cpu-load -g 5 --interval 2) '
set -ga status-right '#[fg=#ff79c6,bg=#8be9fd]#[fg=#44475a,bg=#ff79c6] #(uptime | cut -f 4-5 -d " " | cut -f 1 -d ",") '
set -ga status-right '#[fg=#bd93f9,bg=#ff79c6]#[fg=#f8f8f2,bg=#bd93f9] %a %H:%M:%S #[fg=#6272a4]%Y-%m-%d '
